---
export interface Props {
  t: {
    registration: {
      sectionTitle: string;
      fields: {
        fullName: {
          label: string;
          placeholder: string;
        };
        schoolName: {
          label: string;
          placeholder: string;
        };
        role: {
          label: string;
          placeholder: string;
          options: {
            student: string;
            teacher: string;
            parent: string;
            other: string;
          };
        };
        email: {
          label: string;
          placeholder: string;
        };
        consent: {
          label: string;
        };
      };
      submitButton: string;
      confirmationMessage: string;
      successMessage: string;
      errorMessage: string;
    };
  };
}

const { t } = Astro.props;

// Formspark form ID for IOAI Spain registrations
const FORMSPARK_FORM_ID = "p2kDhINPt";
const FORM_ACTION = `https://submit-form.com/${FORMSPARK_FORM_ID}`;
---

<section class="registration-form" id="registration">
  <div class="container">
    <h2 class="section-title">{t.registration.sectionTitle}</h2>

    <form
      action={FORM_ACTION}
      method="POST"
      class="form"
    >
      <!-- Full Name Field -->
      <div class="form-group">
        <label for="fullName" class="form-label">
          {t.registration.fields.fullName.label}
          <span class="required">*</span>
        </label>
        <input
          type="text"
          id="fullName"
          name="fullName"
          class="form-input"
          placeholder={t.registration.fields.fullName.placeholder}
          required
        />
      </div>

      <!-- School Name Field -->
      <div class="form-group">
        <label for="schoolName" class="form-label">
          {t.registration.fields.schoolName.label}
          <span class="required">*</span>
        </label>
        <input
          type="text"
          id="schoolName"
          name="schoolName"
          class="form-input"
          placeholder={t.registration.fields.schoolName.placeholder}
          required
        />
      </div>

      <!-- Role Dropdown -->
      <div class="form-group">
        <label for="role" class="form-label">
          {t.registration.fields.role.label}
          <span class="required">*</span>
        </label>
        <select
          id="role"
          name="role"
          class="form-select"
          required
        >
          <option value="" disabled selected>
            {t.registration.fields.role.placeholder}
          </option>
          <option value="student">{t.registration.fields.role.options.student}</option>
          <option value="teacher">{t.registration.fields.role.options.teacher}</option>
          <option value="parent">{t.registration.fields.role.options.parent}</option>
          <option value="other">{t.registration.fields.role.options.other}</option>
        </select>
      </div>

      <!-- Email Field -->
      <div class="form-group">
        <label for="email" class="form-label">
          {t.registration.fields.email.label}
          <span class="required">*</span>
        </label>
        <input
          type="email"
          id="email"
          name="email"
          class="form-input"
          placeholder={t.registration.fields.email.placeholder}
          required
        />
      </div>

      <!-- Consent Checkbox -->
      <div class="form-group checkbox-group">
        <label class="checkbox-label">
          <input
            type="checkbox"
            id="consent"
            name="consent"
            value="yes"
            required
          />
          <span>{t.registration.fields.consent.label}</span>
          <span class="required">*</span>
        </label>
      </div>

      <!-- Confirmation Message -->
      <p class="confirmation-message">
        {t.registration.confirmationMessage}
      </p>

      <!-- Submit Button -->
      <button type="submit" class="submit-button">
        {t.registration.submitButton}
      </button>
    </form>
  </div>
</section>

<style>
  .registration-form {
    padding: 4rem 2rem;
    background: transparent;
  }

  .container {
    max-width: 600px;
    margin: 0 auto;
  }

  .section-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 2rem;
    color: #111;
    text-align: center;
  }

  .form {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(10px);
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(229, 231, 235, 0.8);
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #333;
    font-size: 0.95rem;
  }

  .required {
    color: #ef4444;
    margin-left: 0.25rem;
  }

  .form-input,
  .form-select {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 1rem;
    background: white;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .form-input:focus,
  .form-select:focus {
    outline: none;
    border-color: #0066cc;
    box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
  }

  .form-input::placeholder {
    color: #9ca3af;
  }

  .form-select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.5rem;
    padding-right: 2.5rem;
  }

  .checkbox-group {
    margin: 1.5rem 0;
  }

  .checkbox-label {
    display: flex;
    align-items: flex-start;
    cursor: pointer;
    font-size: 0.95rem;
    color: #333;
  }

  .checkbox-label input[type="checkbox"] {
    margin-right: 0.75rem;
    margin-top: 0.125rem;
    width: 1.25rem;
    height: 1.25rem;
    cursor: pointer;
    accent-color: #0066cc;
  }

  .checkbox-label span {
    flex: 1;
    line-height: 1.5;
  }

  .confirmation-message {
    color: #666;
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 1rem 0 1.5rem;
    padding: 1rem;
    background: #f3f4f6;
    border-radius: 6px;
  }

  .submit-button {
    width: 100%;
    padding: 0.875rem 1.5rem;
    background: #0066cc;
    color: white;
    font-weight: 600;
    font-size: 1rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s, transform 0.1s;
  }

  .submit-button:hover {
    background: #0052a3;
    transform: translateY(-1px);
  }

  .submit-button:active {
    transform: translateY(0);
  }

  .submit-button:disabled {
    background: #9ca3af;
    cursor: not-allowed;
    transform: none;
  }

  @media (max-width: 768px) {
    .registration-form {
      padding: 3rem 1rem;
    }

    .section-title {
      font-size: 2rem;
    }

    .form {
      padding: 1.5rem;
    }

    .form-input,
    .form-select {
      font-size: 16px; /* Prevents zoom on iOS */
    }
  }
</style>

<script>
  // Optional: Add client-side form validation or submission handling
  const form = document.querySelector('.form') as HTMLFormElement;

  if (form) {
    form.addEventListener('submit', function(e) {
      // You can add custom validation or analytics tracking here
      console.log('Form submitted');
    });
  }
</script>