---
import Navigation from '../components/Navigation.astro';
import Head from '../components/Head.astro';
import '@/styles/global.css';

export interface Props {
  title: string;
  description?: string;
  showNavigation?: boolean;
  hideNavItems?: boolean;
  ctaUrlOverride?: string;
  ogImage?: string;
  ogType?: 'website' | 'article';
  canonical?: string;
}

const {
  title,
  description,
  showNavigation = true,
  hideNavItems = false,
  ctaUrlOverride,
  ogImage,
  ogType,
  canonical
} = Astro.props;

// Use Astro's native i18n support to get current locale
const locale = Astro.currentLocale || 'en';
---

<!DOCTYPE html>
<html lang={locale}>
  <Head
    title={title}
    description={description}
    ogImage={ogImage}
    ogType={ogType}
    canonical={canonical}
  />
  <body>
    {showNavigation && <Navigation hideNavItems={hideNavItems} ctaUrlOverride={ctaUrlOverride} />}
    <main>
      <slot />
    </main>

    <style>
      body {
        background-color: var(--background-primary);
      }
    </style>
  <script>
    import gsap from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    import { SplitText } from "gsap/SplitText";

    gsap.registerPlugin(ScrollTrigger, SplitText);

    // Type-safe window assignments
    (window as any).gsap = gsap;
    (window as any).SplitText = SplitText;
  </script>
  </body>
  </html>